/*! CanvasGraphicCharts 0.0.1 */
!function(a){function b(a){this.opts=c(a),d.call(this,this.opts)}function c(a){return{id:a.id||"canvas-graphic"}}function d(a){a.id&&(this.cnvs=document.getElementById(a.id)),this.cnvs&&(this.state=new b.CanvasState(this))}b.prototype.canvas=function(a){return"undefined"!=typeof a&&(this.cnvs=a,this.opts.id=a.id),this.cnvs},b.prototype.clear=function(){var a=this.canvas().getContext("2d");a.clearRect(0,0,this.canvas().width,this.canvas().height)},b.prototype.redraw=function(){if(this.clear(),this.replayOpts){var a=this.replayOpts.args.easingOpts;this.replayOpts.args.easingOpts=null,this[this.replayOpts.chart](this.replayOpts.args),this.replayOpts.args.easingOpts=a}},b.prototype.replay=function(){this.clear(),this.replayOpts&&this[this.replayOpts.chart](this.replayOpts.args)},b.prototype.capturePosition=function(a){var b=this.canvas().getBoundingClientRect(),c=Math.round((a.clientX-b.left)/(b.right-b.left)*this.canvas().width),d=Math.round((a.clientY-b.top)/(b.bottom-b.top)*this.canvas().height);return{x:c,y:d}},"undefined"!=typeof module&&null!==module&&module.exports?module.exports=b:"function"==typeof define&&define.amd?define(function(){return b}):a.CanvasGraphics=b}(self),function(a){function b(){}var c,d=["easings"];b.linearTween=function(a,b,c,d){return c*a/d+b},b.easeInQuad=function(a,b,c,d){return a/=d,c*a*a+b},b.easeOutQuad=function(a,b,c,d){return a/=d,-c*a*(a-2)+b},b.easeInOutQuad=function(a,b,c,d){return a/=d/2,1>a?c/2*a*a+b:(a--,-c/2*(a*(a-2)-1)+b)},b.easeInCubic=function(a,b,c,d){return a/=d,c*a*a*a+b},b.easeOutCubic=function(a,b,c,d){return a/=d,a--,c*(a*a*a+1)+b},b.easeInOutCubic=function(a,b,c,d){return a/=d/2,1>a?c/2*a*a*a+b:(a-=2,c/2*(a*a*a+2)+b)},b.easeInQuart=function(a,b,c,d){return a/=d,c*a*a*a*a+b},b.easeOutQuart=function(a,b,c,d){return a/=d,a--,-c*(a*a*a*a-1)+b},b.easeInOutQuart=function(a,b,c,d){return a/=d/2,1>a?c/2*a*a*a*a+b:(a-=2,-c/2*(a*a*a*a-2)+b)},b.easeInQuint=function(a,b,c,d){return a/=d,c*a*a*a*a*a+b},b.easeOutQuint=function(a,b,c,d){return a/=d,a--,c*(a*a*a*a*a+1)+b},b.easeInOutQuint=function(a,b,c,d){return a/=d/2,1>a?c/2*a*a*a*a*a+b:(a-=2,c/2*(a*a*a*a*a+2)+b)},b.easeInSine=function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b},b.easeOutSine=function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},b.easeInOutSine=function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b},b.easeInExpo=function(a,b,c,d){return c*Math.pow(2,10*(a/d-1))+b},b.easeOutExpo=function(a,b,c,d){return c*(-Math.pow(2,-10*a/d)+1)+b},b.easeInOutExpo=function(a,b,c,d){return a/=d/2,1>a?c/2*Math.pow(2,10*(a-1))+b:(a--,c/2*(-Math.pow(2,-10*a)+2)+b)},b.easeInCirc=function(a,b,c,d){return a/=d,-c*(Math.sqrt(1-a*a)-1)+b},b.easeOutCirc=function(a,b,c,d){return a/=d,a--,c*Math.sqrt(1-a*a)+b},b.easeInOutCirc=function(a,b,c,d){return a/=d/2,1>a?-c/2*(Math.sqrt(1-a*a)-1)+b:(a-=2,c/2*(Math.sqrt(1-a*a)+1)+b)},b.outElastic=function(a,b,c,d){var e=(a/=d)*a,f=e*a;return b+c*(31.345*f*e+-98.5825*e*e+114.58*f+-59.29*e+12.9475*a)},b.easings=function(){if(!c){var a;c={};for(a in b)b.hasOwnProperty(a)&&d.indexOf(a)<0&&(c[a]=a)}return c}(),"undefined"!=typeof module&&null!==module&&module.exports?module.exports=b:"function"==typeof define&&define.amd?define(function(){return b}):(a.CanvasGraphics||(a.CanvasGraphics={}),a.CanvasGraphics.Easings=b)}(self),function(a){function b(a){this.clear(),this.duration=a}b.prototype.getElapsedTime=function(){return this.startTime?this.currentTime=Date.now():this.startTime=this.currentTime=Date.now(),this.currentTime-this.startTime},b.prototype.check=function(a){return this.currentTime-this.startTime<=(a||this.duration)},b.prototype.clear=function(){this.startTime=this.currentTime=0},"undefined"!=typeof module&&null!==module&&module.exports?module.exports=b:"function"==typeof define&&define.amd?define(function(){return b}):(a.CanvasGraphics||(a.CanvasGraphics={}),a.CanvasGraphics.Lapse=b)}(self),function(a){function b(a){this.canvasChart=a,this.canvas=a.canvas(),this.elements=[]}b.prototype.addListener=function(a,b){var c=function(a){for(var c=this.canvasChart.capturePosition(a),d=this.elements.length-1;d>=0;d--){var e=this.elements[d];e.contains(c.x,c.y)&&b(a,e)}}.bind(this);return this.canvas.addEventListener(a,c),c},b.prototype.removeListener=function(a,b){this.canvas.addEventListener(a,fn)},b.prototype.addElement=function(a){for(var b=this.elements.length-1;b>=0;b--){var c=this.elements[b];if(c===a)return}this.elements.push(a)},"undefined"!=typeof module&&null!==module&&module.exports?module.exports=CanvasGraphics:"function"==typeof define&&define.amd?define(function(){return CanvasGraphics}):(a.CanvasGraphics||(a.CanvasGraphics={}),a.CanvasGraphics.CanvasState=b)}(self),function(a){function b(a){arcOpts=a.arcOpts||{},pie=a.pie||{x:100,y:100,radius:50},values=a.values,arcOpts=a.arcOpts,easingOpts=a.easingOpts;var b=this.canvas().getContext("2d");easingOpts?g.call(this,b,pie,values,arcOpts,easingOpts):f.call(this,b,pie,values,arcOpts),this.replayOpts={chart:"pieChart",args:a}}function c(a,b,c){return c?new CanvasGraphics.DonutSlice(a,b):new CanvasGraphics.SlicePie(a,b)}function d(a,b,d){var e=[];return b.forEach(function(b){e.push(c(a,b,d))}),e}function e(a){var b=0;return a.forEach(function(a){b+="object"==typeof a?a.value:a}),b}function f(a,b,d,f){var g,h,i,j=e(d);f.angleStart&&(i=h=f.angleStart*Math.PI/180);for(var k=0;k<d.length;k++)g=c(b,d[k]),i+=2*g.value*Math.PI/j,slicePie.draw(a,h,i,f),h+=2*g.value*Math.PI/j}function g(a,b,c,f,g){var i,j,k,l,m=new CanvasGraphics.Lapse(g.duration),n=e(c),o=d(b,c,f.inner);f.angleStart&&(i=f.angleStart*Math.PI/180),o.forEach(function(a){this.state.addElement(a)}.bind(this)),this.state.addListener("click",function(){console.log("click in")}),function p(){k=i,m.check()?(this.clear(),k=h(a,o,k,l,j,n,f),j=CanvasGraphics.Easings[g.easing](m.getElapsedTime(),0,2*Math.PI,g.duration),window.requestAnimationFrame(p.bind(this))):k=h(a,o,k,l,2*Math.PI,n,f)}.call(this)}function h(a,b,c,d,e,f,g){b.forEach(function(b){return d=b.value*e/f,b.draw(a,c,d+c,g),c+=d})}"undefined"!=typeof module&&null!==module&&module.exports?module.exports=CanvasGraphics:"function"==typeof define&&define.amd?define(function(){return CanvasGraphics}):(a.CanvasGraphics||(a.CanvasGraphics={}),a.CanvasGraphics.prototype.pieChart=b)}(self),function(a){function b(a){a.arcOpts.inner=!0,this.pieChart(a),this.replayOpts={chart:"donutChart",args:a}}"undefined"!=typeof module&&null!==module&&module.exports?module.exports=CanvasGraphics:"function"==typeof define&&define.amd?define(function(){return CanvasGraphics}):(a.CanvasGraphics||(a.CanvasGraphics={}),a.CanvasGraphics.prototype.donutChart=b)}(self),function(a){function b(a,b){this.pie=a,this.id=b.id,this.color=b.color,this.value=b.value}b.prototype.draw=function(a,b,c,d){d=d||{},this.ctx=a,this.startRadian=b,this.endRadian=c,this.opts=d,this.color&&(a.fillStyle=this.color),this.defineArc(),a.lineTo(this.pie.x,this.pie.y),a.closePath(),a.fill(),d.stroke&&(d.lineWidth&&(a.lineWidth=d.lineWidth),d.strokeColor&&(a.strokeStyle=d.strokeColor),a.stroke())},b.prototype.redraw=function(){this.draw(this.ctx,this.startRadian,this.endRadian,this.opts)},b.prototype.defineArc=function(){var a=this.ctx;a.beginPath(),a.moveTo(this.pie.x,this.pie.y),a.arc(this.pie.x,this.pie.y,this.pie.radius,this.startRadian,this.endRadian,!1)},b.prototype.contains=function(a,b){return this.defineArc(),this.ctx.isPointInPath(a,b)},"undefined"!=typeof module&&null!==module&&module.exports?module.exports=b:"function"==typeof define&&define.amd?define(function(){return b}):(a.CanvasGraphics||(a.CanvasGraphics={}),a.CanvasGraphics.SlicePie=b)}(self),function(a){function b(a,b){this.pie=a,this.id=b.id,this.color=b.color,this.value=b.value}b.prototype.draw=function(a,b,c,d){d=d||{},this.ctx=a,this.startRadian=b,this.endRadian=c,this.opts=d,this.color&&(a.fillStyle=this.color),this.defineArc(),a.lineTo(this.pie.x,this.pie.y),a.closePath(),a.fill(),d.stroke&&(d.lineWidth&&(a.lineWidth=d.lineWidth),d.strokeColor&&(a.strokeStyle=d.strokeColor),a.stroke()),d.inner&&(a.beginPath(),a.fillStyle=d.strokeColor,a.moveTo(this.pie.x,this.pie.y),a.arc(this.pie.x,this.pie.y,this.pie.radius/3*2,b,c,!1),a.closePath(),a.fill())},b.prototype.redraw=function(){this.draw(this.ctx,this.startRadian,this.endRadian,this.opts)},b.prototype.defineArc=function(){var a=this.ctx;a.beginPath(),a.moveTo(this.pie.x,this.pie.y),a.arc(this.pie.x,this.pie.y,this.pie.radius,this.startRadian,this.endRadian,!1)},b.prototype.contains=function(a,b){return this.defineArc(),this.ctx.isPointInPath(a,b)},"undefined"!=typeof module&&null!==module&&module.exports?module.exports=b:"function"==typeof define&&define.amd?define(function(){return b}):(a.CanvasGraphics||(a.CanvasGraphics={}),a.CanvasGraphics.DonutSlice=b)}(self);